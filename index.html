<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Galaxy Overlord: 3D Pro</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
        body { margin: 0; background: #000510; overflow: hidden; font-family: 'Orbitron', sans-serif; color: #fff; }
        .ui { position: absolute; padding: 10px; background: rgba(0,20,40,0.8); border: 1px solid #0ff; border-radius: 8px; z-index: 100; font-size: 12px; }
        .btn { background: linear-gradient(135deg, #0ff, #0088ff); color: #000; border: none; padding: 6px 12px; font-weight: bold; cursor: pointer; border-radius: 4px; margin-top: 5px; }
        .menu { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 85%; background: rgba(0,10,20,0.95); border: 2px solid #0ff; padding: 20px; z-index: 200; box-shadow: 0 0 20px #0ff; text-align: center; }
        .mission-item { background: rgba(0,255,255,0.1); margin: 5px 0; padding: 8px; border-left: 3px solid #0ff; text-align: left; font-size: 11px; }
    </style>
</head>
<body>

<div class="ui" style="top:10; left:10;">
    Lvl: <span id="lvl">1</span> | Coins: <span id="scr">0</span> | Gems: <span id="gms">0</span><br>
    <button class="btn" onclick="toggle('shop')">SHOP</button>
    <button class="btn" onclick="toggle('miss')">MISSIONS</button>
</div>

<div id="shop" class="menu">
    <h2 style="color:#0ff">TECH SHOP</h2>
    <button class="btn" onclick="buyGems()">BUY 500 GEMS (â‚¹20)</button><br>
    <button class="btn" onclick="buyShip('#ff0055')">RED PHANTOM (100 Gems)</button><br>
    <button class="btn" onclick="buyShip('#00ff44')">GREEN VENOM (200 Gems)</button><br><br>
    <button class="btn" style="background:#ff3300" onclick="toggle('shop')">BACK</button>
</div>

<div id="miss" class="menu">
    <h2 style="color:#0ff">COMMAND CENTER</h2>
    <div class="mission-item">1. Cadet: Kill 20 Enemies (+10 Gems)</div>
    <div class="mission-item">2. Pilot: Kill 100 Enemies (+50 Gems)</div>
    <div class="mission-item">3. Veteran: Reach Level 5 (+100 Gems)</div>
    <div class="mission-item">4. Gem Hunter: Collect 50 Gems (+150 Gems)</div>
    <div class="mission-item">5. Elite: Score 2000 Coins (+300 Gems)</div>
    <br><button class="btn" style="background:#ff3300" onclick="toggle('miss')">BACK</button>
</div>

<canvas id="g"></canvas>

<script>
    const c = document.getElementById('g'); const x = c.getContext('2d');
    c.width = window.innerWidth; c.height = window.innerHeight;

    let score = parseInt(localStorage.getItem('gScore')) || 0;
    let level = parseInt(localStorage.getItem('gLvl')) || 1;
    let gems = parseInt(localStorage.getItem('gGems')) || 0;
    let kills = parseInt(localStorage.getItem('gKills')) || 0;
    let active = true;

    let player = { x: c.width/2, y: c.height-100, color: '#00e5ff' };
    let bullets = [], eBullets = [], enemies = [], stars = [];

    for(let i=0; i<100; i++) stars.push({x:Math.random()*c.width, y:Math.random()*c.height, s:Math.random()*3});

    function toggle(id) { 
        let m = document.getElementById(id); 
        m.style.display = (m.style.display==='block')?'none':'block'; 
        active = (m.style.display!=='block');
    }

    function buyGems() { alert("Simulating UPI Payment..."); gems += 500; save(); }
    function buyShip(col) { if(gems>=100){ gems-=100; player.color=col; save(); } else alert("No Gems!"); }
    function save() {
        localStorage.setItem('gScore', score); localStorage.setItem('gLvl', level);
        localStorage.setItem('gGems', gems); localStorage.setItem('gKills', kills);
        document.getElementById('scr').innerText = score; document.getElementById('lvl').innerText = level;
        document.getElementById('gms').innerText = gems;
    }

    window.addEventListener('touchmove', e => { 
        if(!active) return;
        player.x = e.touches[0].clientX; 
        player.y = e.touches[0].clientY; // Full Screen Movement
    });

    function spawn() {
        if(!active || enemies.length > 6) return;
        enemies.push({ x:Math.random()*c.width, y:Math.random()*250+50, vx:(Math.random()-0.5)*5, vy:(Math.random()-0.5)*3, hp:level });
    }
    setInterval(spawn, 1500);


